# ğŸ“Š Ejemplo Visual: Historial Completo de Vacaciones

## ğŸ¯ Caso del Usuario

**Trabajador**: Juan PÃ©rez  
**Fecha de ingreso**: 1 de enero de 2020  
**Fecha actual**: 8 de enero de 2025  

---

## ğŸ“… EvoluciÃ³n de PerÃ­odos AÃ±o por AÃ±o

### **AÃ±o 2020-2021** (Primer PerÃ­odo)

**Meses trabajados**: 12 meses (enero 2020 a diciembre 2020)  
**DÃ­as acumulados**: 12 Ã— 1.25 = **15 dÃ­as**  
**DÃ­as usados**: 0 dÃ­as  
**DÃ­as disponibles**: 15 dÃ­as  

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PerÃ­odo      â”‚ Acumulado   â”‚ Usado  â”‚ Disponible   â”‚ Estado   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2020-2021    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 15.00 dÃ­as   â”‚ âœ“ ACTIVO â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ObservaciÃ³n**: No tomÃ³ vacaciones en este perÃ­odo.

---

### **AÃ±o 2021-2022** (Segundo PerÃ­odo)

**Meses trabajados**: 12 meses (enero 2021 a diciembre 2021)  
**DÃ­as acumulados**: 12 Ã— 1.25 = **15 dÃ­as**  
**DÃ­as usados**: 0 dÃ­as  
**DÃ­as disponibles**: 15 dÃ­as  

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PerÃ­odo      â”‚ Acumulado   â”‚ Usado  â”‚ Disponible   â”‚ Estado   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2020-2021    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 15.00 dÃ­as   â”‚ âœ“ ACTIVO â”‚
â”‚ 2021-2022    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 15.00 dÃ­as   â”‚ âœ“ ACTIVO â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total Disponible: 30 dÃ­as (mÃ¡ximo legal = 2 perÃ­odos)
```

**ObservaciÃ³n**: Tampoco tomÃ³ vacaciones. Ahora tiene 2 perÃ­odos activos (mÃ¡ximo permitido).

---

### **AÃ±o 2022-2023** (Tercer PerÃ­odo - SE ARCHIVA EL PRIMERO)

**Meses trabajados**: 12 meses (enero 2022 a diciembre 2022)  
**DÃ­as acumulados**: 12 Ã— 1.25 = **15 dÃ­as**  
**DÃ­as usados**: 0 dÃ­as  

**âš ï¸ Regla de MÃ¡ximo 2 PerÃ­odos se Activa**:
- El sistema archiva automÃ¡ticamente el perÃ­odo **2020-2021** (el mÃ¡s antiguo)
- **Se pierden** los 15 dÃ­as de ese perÃ­odo
- Se mantienen activos: 2021-2022 y 2022-2023

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PerÃ­odo      â”‚ Acumulado   â”‚ Usado  â”‚ Disponible   â”‚ Estado         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2020-2021    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 0 dÃ­as       â”‚ âš  ARCHIVADO    â”‚
â”‚              â”‚             â”‚        â”‚              â”‚ (Regla mÃ¡x 2)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2021-2022    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 15.00 dÃ­as   â”‚ âœ“ ACTIVO       â”‚
â”‚ 2022-2023    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 15.00 dÃ­as   â”‚ âœ“ ACTIVO       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total Acumulado Real: 45 dÃ­as (15 + 15 + 15)
Total Disponible: 30 dÃ­as (solo perÃ­odos activos)
Total Perdido: 15 dÃ­as (perÃ­odo 2020-2021 archivado)
```

---

### **AÃ±o 2023-2024** (Cuarto PerÃ­odo - TOMA 10 DÃAS CON AUTORIZACIÃ“N)

**Meses trabajados**: 12 meses (enero 2023 a diciembre 2023)  
**DÃ­as acumulados**: 12 Ã— 1.25 = **15 dÃ­as**  

**ğŸ“ Evento**: El trabajador solicita 10 dÃ­as de vacaciones en diciembre 2023.

**âš ï¸ Con AutorizaciÃ³n Especial**: El jefe autoriza que use dÃ­as del **perÃ­odo mÃ¡s antiguo disponible** (2021-2022), aunque ese perÃ­odo tenga 15 dÃ­as disponibles, solo usa 10.

**Descuento FIFO (First In, First Out)**:
```
Solicita: 10 dÃ­as
Sistema aplica FIFO:
  1. PerÃ­odo 2021-2022 (mÃ¡s antiguo disponible):
     Disponible: 15 dÃ­as
     Usa: 10 dÃ­as
     Quedan: 5 dÃ­as
```

**AdemÃ¡s, el sistema archiva el perÃ­odo 2021-2022 cuando se completa el nuevo**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PerÃ­odo      â”‚ Acumulado   â”‚ Usado  â”‚ Disponible   â”‚ Estado         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2020-2021    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 0 dÃ­as       â”‚ âš  ARCHIVADO    â”‚
â”‚              â”‚             â”‚        â”‚              â”‚ (Regla mÃ¡x 2)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2021-2022    â”‚ 15.00 dÃ­as  â”‚ 10 dÃ­asâ”‚ 5.00 dÃ­as    â”‚ âš  ARCHIVADO    â”‚
â”‚              â”‚             â”‚        â”‚              â”‚ (Regla mÃ¡x 2)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-2023    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 15.00 dÃ­as   â”‚ âœ“ ACTIVO       â”‚
â”‚ 2023-2024    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 15.00 dÃ­as   â”‚ âœ“ ACTIVO       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total Acumulado Real: 60 dÃ­as
Total Usado: 10 dÃ­as (del perÃ­odo 2021-2022)
Total Disponible: 30 dÃ­as (15 + 15 de perÃ­odos activos)
Total Perdido: 20 dÃ­as (15 de 2020-2021 + 5 de 2021-2022)
```

**Nota**: Aunque el perÃ­odo 2021-2022 aÃºn tiene 5 dÃ­as disponibles, se archiva por la regla de mÃ¡ximo 2 perÃ­odos activos. Esos 5 dÃ­as se pierden.

---

### **AÃ±o 2024-2025** (Quinto PerÃ­odo - USA TODO LO PENDIENTE)

**Meses trabajados**: 12 meses (enero 2024 a diciembre 2024)  
**DÃ­as acumulados**: 12 Ã— 1.25 = **15 dÃ­as**  

**ğŸ“ Evento**: El trabajador solicita 30 dÃ­as de vacaciones (todo lo disponible) en enero 2025.

**Descuento FIFO AutomÃ¡tico**:
```
Solicita: 30 dÃ­as
Sistema aplica FIFO:
  1. PerÃ­odo 2022-2023 (mÃ¡s antiguo disponible):
     Disponible: 15 dÃ­as
     Usa: 15 dÃ­as completos
     Quedan: 0 dÃ­as (COMPLETADO)
  
  2. PerÃ­odo 2023-2024:
     Disponible: 15 dÃ­as
     Usa: 15 dÃ­as completos
     Quedan: 0 dÃ­as (COMPLETADO)
  
  Total descontado: 30 dÃ­as âœ“
```

**Estado Final**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PerÃ­odo      â”‚ Acumulado   â”‚ Usado  â”‚ Disponible   â”‚ Estado         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2020-2021    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 0 dÃ­as       â”‚ âš  ARCHIVADO    â”‚
â”‚              â”‚             â”‚        â”‚              â”‚ (Regla mÃ¡x 2)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2021-2022    â”‚ 15.00 dÃ­as  â”‚ 10 dÃ­asâ”‚ 0 dÃ­as       â”‚ âš  ARCHIVADO    â”‚
â”‚              â”‚             â”‚        â”‚ (5 perdidos) â”‚ (Regla mÃ¡x 2)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-2023    â”‚ 15.00 dÃ­as  â”‚ 15 dÃ­asâ”‚ 0 dÃ­as       â”‚ âœ“ COMPLETADO   â”‚
â”‚              â”‚             â”‚        â”‚              â”‚ (Agotado)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2023-2024    â”‚ 15.00 dÃ­as  â”‚ 15 dÃ­asâ”‚ 0 dÃ­as       â”‚ âœ“ COMPLETADO   â”‚
â”‚              â”‚             â”‚        â”‚              â”‚ (Agotado)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2024-2025    â”‚ 15.00 dÃ­as  â”‚ 0 dÃ­as â”‚ 15.00 dÃ­as   â”‚ âœ“ ACTIVO       â”‚
â”‚              â”‚ (nuevo)     â”‚        â”‚              â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total Acumulado Real: 75 dÃ­as (5 perÃ­odos Ã— 15)
Total Usado: 40 dÃ­as (10 + 15 + 15)
Total Disponible: 15 dÃ­as (solo perÃ­odo 2024-2025)
Total Perdido: 20 dÃ­as (15 de 2020-2021 + 5 de 2021-2022)
```

---

## ğŸ¨ VisualizaciÃ³n en la AplicaciÃ³n

### Vista en `/employees/[id]/vacations`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š PerÃ­odos de Vacaciones - Historial Completo                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚ AÃ±o         Acumulado    Usado      Disponible    Estado              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ 2024-2025   15.00 dÃ­as   0 dÃ­as     15.00 dÃ­as    âœ“ Activo          â”‚
â”‚ 2023-2024   15.00 dÃ­as   15 dÃ­as    0 dÃ­as        âœ“ Agotado         â”‚
â”‚ 2022-2023   15.00 dÃ­as   15 dÃ­as    0 dÃ­as        âœ“ Agotado         â”‚
â”‚ 2021-2022   15.00 dÃ­as   10 dÃ­as    0 dÃ­as        âš  Archivado       â”‚
â”‚             Archivado por regla de mÃ¡ximo 2 perÃ­odos                  â”‚
â”‚ 2020-2021   15.00 dÃ­as   0 dÃ­as     0 dÃ­as        âš  Archivado       â”‚
â”‚             Archivado por regla de mÃ¡ximo 2 perÃ­odos                  â”‚
â”‚                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š Leyenda de Estados:                                                â”‚
â”‚  â— Activo: PerÃ­odo disponible para uso                               â”‚
â”‚  â— Agotado: DÃ­as completamente utilizados                            â”‚
â”‚  â— Archivado: Eliminado por regla de mÃ¡ximo 2 perÃ­odos (Art. 70)    â”‚
â”‚                                                                        â”‚
â”‚ â„¹ï¸ SegÃºn el Art. 70 del CÃ³digo del Trabajo, solo se pueden mantener  â”‚
â”‚   mÃ¡ximo 2 perÃ­odos activos. Los perÃ­odos mÃ¡s antiguos se archivan   â”‚
â”‚   automÃ¡ticamente, pero se mantienen en el historial para auditorÃ­a. â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Detalles TÃ©cnicos de la ImplementaciÃ³n

### 1. Campo `status` en `vacation_periods`

```sql
status VARCHAR(20) CHECK (status IN ('active', 'completed', 'archived'))
```

- **active**: PerÃ­odo disponible para usar
- **completed**: DÃ­as completamente utilizados (acumulado = usado)
- **archived**: Archivado por regla de mÃ¡ximo 2 perÃ­odos

### 2. FunciÃ³n `getVacationPeriods(employeeId, includeArchived)`

```typescript
// Solo perÃ­odos activos (para cÃ¡lculos)
const activePeriods = await getVacationPeriods(employeeId, false)

// Historial completo (para auditorÃ­a)
const allPeriods = await getVacationPeriods(employeeId, true)
```

### 3. Descuento FIFO AutomÃ¡tico

```typescript
// Al tomar 30 dÃ­as:
const updatedPeriods = await assignVacationDays(employeeId, 30)

// Resultado:
// - Descuenta 15 del perÃ­odo 2022-2023 (mÃ¡s antiguo) â†’ COMPLETADO
// - Descuenta 15 del perÃ­odo 2023-2024 (siguiente) â†’ COMPLETADO
// - Retorna: [periodo2022, periodo2023] (ambos actualizados)
```

---

## ğŸ“š Referencias Legales

### Art. 70 del CÃ³digo del Trabajo

```
"El feriado podrÃ¡ acumularse por acuerdo de las partes, 
pero sÃ³lo hasta por dos perÃ­odos consecutivos."
```

**InterpretaciÃ³n (Ord. NÂ°6287/2017 DT)**:
- MÃ¡ximo 2 perÃ­odos = 60 dÃ­as (2 Ã— 30)
- Si el trabajador ya tiene 2 perÃ­odos acumulados, el empleador DEBE otorgar el primero antes de que se genere un nuevo perÃ­odo
- Si no lo hace y se genera un 3er perÃ­odo, el mÃ¡s antiguo se elimina automÃ¡ticamente

---

## âœ… Beneficios del Historial Completo

1. **Transparencia**: El trabajador ve exactamente quÃ© pasÃ³ con todos sus dÃ­as
2. **AuditorÃ­a**: Se puede demostrar cumplimiento legal ante inspecciones
3. **ResoluciÃ³n de Conflictos**: Si hay disputa, hay registro completo
4. **Trazabilidad**: Se sabe cuÃ¡ndo y por quÃ© se perdieron dÃ­as
5. **EducaciÃ³n**: El trabajador entiende la importancia de tomar vacaciones a tiempo

---

## ğŸ¯ Casos de Uso

### Caso 1: Trabajador Reclama DÃ­as Perdidos

**SituaciÃ³n**: "Â¿Por quÃ© solo tengo 15 dÃ­as si llevo 5 aÃ±os trabajando?"

**Respuesta con Historial**:
```
Mira tu historial:
- 2020-2021: 15 dÃ­as â†’ Archivado (no tomaste a tiempo)
- 2021-2022: 15 dÃ­as (usaste 10, perdiste 5) â†’ Archivado
- 2022-2023: 15 dÃ­as â†’ Usados completamente âœ“
- 2023-2024: 15 dÃ­as â†’ Usados completamente âœ“
- 2024-2025: 15 dÃ­as â†’ Disponibles ahora

Has acumulado 75 dÃ­as en total, pero perdiste 20 por la regla 
de mÃ¡ximo 2 perÃ­odos (Art. 70). La empresa te notificÃ³ oportunamente.
```

### Caso 2: AuditorÃ­a de la DirecciÃ³n del Trabajo

**Solicitud DT**: "Mostrar historial de vacaciones de Juan PÃ©rez desde 2020"

**Sistema**: Genera reporte con tabla completa, incluyendo:
- Todos los perÃ­odos (activos, completados, archivados)
- Fechas de archivado y motivos legales
- Notificaciones enviadas al trabajador
- Comprobante de cumplimiento del Art. 70

---

**Fecha**: 8 de enero de 2025  
**VersiÃ³n**: 1.0  
**Basado en**: Art. 70 CT, Ord. NÂ°6287/2017 DT



